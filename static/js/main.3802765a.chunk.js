(this.webpackJsonpexample=this.webpackJsonpexample||[]).push([[0],{117:function(e,t,i){},288:function(e,t,i){"use strict";i.r(t);i(116),i(117);var r=i(63),n=i.n(r),o=i(8),a=i(113),s=i(114),u=i(115),c=i(112),l=i(105),f=i(29),v=i(43),m=i(0),p=i.n(m),h=i(65),_=i.n(h),d=i(106),g=i.n(d),y=i(107),x=i.n(y);function b(e,t){return e(t={exports:{}},t.exports),t.exports}var T="function"===typeof Symbol&&Symbol.for,R=T?Symbol.for("react.element"):60103,E=T?Symbol.for("react.portal"):60106,D=T?Symbol.for("react.fragment"):60107,F=T?Symbol.for("react.strict_mode"):60108,S=T?Symbol.for("react.profiler"):60114,w=T?Symbol.for("react.provider"):60109,O=T?Symbol.for("react.context"):60110,A=T?Symbol.for("react.async_mode"):60111,j=T?Symbol.for("react.concurrent_mode"):60111,U=T?Symbol.for("react.forward_ref"):60112,C=T?Symbol.for("react.suspense"):60113,P=T?Symbol.for("react.suspense_list"):60120,M=T?Symbol.for("react.memo"):60115,B=T?Symbol.for("react.lazy"):60116,L=T?Symbol.for("react.block"):60121,k=T?Symbol.for("react.fundamental"):60117,z=T?Symbol.for("react.responder"):60118,X=T?Symbol.for("react.scope"):60119;function I(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case R:switch(e=e.type){case A:case j:case D:case S:case F:case C:return e;default:switch(e=e&&e.$$typeof){case O:case U:case B:case M:case w:return e;default:return t}}case E:return t}}}function V(e){return I(e)===j}var G={AsyncMode:A,ConcurrentMode:j,ContextConsumer:O,ContextProvider:w,Element:R,ForwardRef:U,Fragment:D,Lazy:B,Memo:M,Portal:E,Profiler:S,StrictMode:F,Suspense:C,isAsyncMode:function(e){return V(e)||I(e)===A},isConcurrentMode:V,isContextConsumer:function(e){return I(e)===O},isContextProvider:function(e){return I(e)===w},isElement:function(e){return"object"===typeof e&&null!==e&&e.$$typeof===R},isForwardRef:function(e){return I(e)===U},isFragment:function(e){return I(e)===D},isLazy:function(e){return I(e)===B},isMemo:function(e){return I(e)===M},isPortal:function(e){return I(e)===E},isProfiler:function(e){return I(e)===S},isStrictMode:function(e){return I(e)===F},isSuspense:function(e){return I(e)===C},isValidElementType:function(e){return"string"===typeof e||"function"===typeof e||e===D||e===j||e===S||e===F||e===C||e===P||"object"===typeof e&&null!==e&&(e.$$typeof===B||e.$$typeof===M||e.$$typeof===w||e.$$typeof===O||e.$$typeof===U||e.$$typeof===k||e.$$typeof===z||e.$$typeof===X||e.$$typeof===L)},typeOf:I},N=(b((function(e,t){0})),b((function(e){e.exports=G})),Object.getOwnPropertySymbols),$=Object.prototype.hasOwnProperty,W=Object.prototype.propertyIsEnumerable;function H(e){if(null===e||void 0===e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}(function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},i=0;i<10;i++)t["_"+String.fromCharCode(i)]=i;if("0123456789"!==Object.getOwnPropertyNames(t).map((function(e){return t[e]})).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach((function(e){r[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(n){return!1}})()&&Object.assign;var Y="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";function q(e,t,i,r,n){}q.resetWarningCache=function(){0};Function.call.bind(Object.prototype.hasOwnProperty);function J(){}function K(){}K.resetWarningCache=J;var Q=b((function(e){e.exports=function(){function e(e,t,i,r,n,o){if(o!==Y){var a=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw a.name="Invariant Violation",a}}function t(){return e}e.isRequired=e;var i={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:K,resetWarningCache:J};return i.PropTypes=i,i}()}));function Z(e,t,i){var r=e.createShader(t);if(e.shaderSource(r,i),e.compileShader(r),!e.getShaderParameter(r,e.COMPILE_STATUS))throw e.getShaderInfoLog(r);return r}var ee=function(){function e(t,i,r){Object(f.a)(this,e);var n=Z(t,t.VERTEX_SHADER,i),o=Z(t,t.FRAGMENT_SHADER,r);if(this.uniforms={},this.program=t.createProgram(),this.gl=t,t.attachShader(this.program,n),t.attachShader(this.program,o),t.linkProgram(this.program),!t.getProgramParameter(this.program,t.LINK_STATUS))throw t.getProgramInfoLog(this.program);for(var a=t.getProgramParameter(this.program,t.ACTIVE_UNIFORMS),s=0;s<a;s++){var u=t.getActiveUniform(this.program,s).name;this.uniforms[u]=t.getUniformLocation(this.program,u)}}return Object(v.a)(e,[{key:"bind",value:function(){this.gl.useProgram(this.program)}}]),e}();function te(e,t,i,r){if(!function(e,t,i,r){var n=e.createTexture();e.bindTexture(e.TEXTURE_2D,n),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.texImage2D(e.TEXTURE_2D,0,t,4,4,0,i,r,null);var o=e.createFramebuffer();return e.bindFramebuffer(e.FRAMEBUFFER,o),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,n,0),e.checkFramebufferStatus(e.FRAMEBUFFER)===e.FRAMEBUFFER_COMPLETE}(e,t,i,r))switch(t){case e.R16F:return te(e,e.RG16F,e.RG,r);case e.RG16F:return te(e,e.RGBA16F,e.RGBA,r);default:return null}return{internalFormat:t,format:i}}var ie="\nprecision highp float;\nprecision mediump sampler2D;\n\nvarying vec2 vUv;\nuniform sampler2D uVelocity;\nuniform sampler2D uSource;\nuniform vec2 texelSize;\nuniform float dt;\nuniform float dissipation;\n\nvec4 bilerp (in sampler2D sam, in vec2 p) {\n  vec4 st;\n  st.xy = floor(p - 0.5) + 0.5;\n  st.zw = st.xy + 1.0;\n  vec4 uv = st * texelSize.xyxy;\n  vec4 a = texture2D(sam, uv.xy);\n  vec4 b = texture2D(sam, uv.zy);\n  vec4 c = texture2D(sam, uv.xw);\n  vec4 d = texture2D(sam, uv.zw);\n  vec2 f = p - st.xy;\n  return mix(mix(a, b, f.x), mix(c, d, f.x), f.y);\n}\n\nvoid main () {\n  vec2 coord = gl_FragCoord.xy - dt * texture2D(uVelocity, vUv).xy;\n  gl_FragColor = dissipation * bilerp(uSource, coord);\n  gl_FragColor.a = 1.0;\n}\n",re="\nprecision highp float;\nprecision mediump sampler2D;\n\nvarying vec2 vUv;\nuniform sampler2D uVelocity;\nuniform sampler2D uSource;\nuniform vec2 texelSize;\nuniform float dt;\nuniform float dissipation;\n\nvoid main () {\n  vec2 coord = vUv - dt * texture2D(uVelocity, vUv).xy * texelSize;\n  gl_FragColor = dissipation * texture2D(uSource, coord);\n  gl_FragColor.a = 1.0;\n}\n",ne="\nprecision highp float;\nprecision mediump sampler2D;\n\nvarying vec2 vUv;\nuniform sampler2D uTexture;\nuniform float value;\n\nvoid main () {\n  gl_FragColor = value * texture2D(uTexture, vUv);\n}\n",oe="\nprecision highp float;\nprecision mediump sampler2D;\n\nvarying vec2 vUv;\nvarying vec2 vL;\nvarying vec2 vR;\nvarying vec2 vT;\nvarying vec2 vB;\nuniform sampler2D uVelocity;\n\nvoid main () {\n  float L = texture2D(uVelocity, vL).y;\n  float R = texture2D(uVelocity, vR).y;\n  float T = texture2D(uVelocity, vT).x;\n  float B = texture2D(uVelocity, vB).x;\n  float vorticity = R - L - T + B;\n  gl_FragColor = vec4(vorticity, 0.0, 0.0, 1.0);\n}\n",ae="\nprecision highp float;\nprecision mediump sampler2D;\n\nvarying vec2 vUv;\nuniform sampler2D uTexture;\n\nvoid main () {\n  gl_FragColor = texture2D(uTexture, vUv);\n}\n",se="\nprecision highp float;\nprecision mediump sampler2D;\n\nvarying vec2 vUv;\nvarying vec2 vL;\nvarying vec2 vR;\nvarying vec2 vT;\nvarying vec2 vB;\nuniform sampler2D uVelocity;\n\nvec2 sampleVelocity (in vec2 uv) {\n  vec2 multiplier = vec2(1.0, 1.0);\n  if (uv.x < 0.0) { uv.x = 0.0; multiplier.x = -1.0; };\n  if (uv.x > 1.0) { uv.x = 1.0; multiplier.x = -1.0; };\n  if (uv.y < 0.0) { uv.y = 0.0; multiplier.y = -1.0; };\n  if (uv.y > 1.0) { uv.y = 1.0; multiplier.y = -1.0; };\n  return multiplier * texture2D(uVelocity, uv).xy;\n}\n\nvoid main () {\n  float L = sampleVelocity(vL).x;\n  float R = sampleVelocity(vR).x;\n  float T = sampleVelocity(vT).y;\n  float B = sampleVelocity(vB).y;\n  float div = 0.5 * (R - L + T - B);\n  gl_FragColor = vec4(div, 0.0, 0.0, 1.0);\n}\n",ue="\nprecision highp float;\nprecision mediump sampler2D;\n\nvarying vec2 vUv;\nvarying vec2 vL;\nvarying vec2 vR;\nvarying vec2 vT;\nvarying vec2 vB;\nuniform sampler2D uPressure;\nuniform sampler2D uVelocity;\n\nvec2 boundary (in vec2 uv) {\n  uv = min(max(uv, 0.0), 1.0);\n  return uv;\n}\n\nvoid main () {\n  float L = texture2D(uPressure, boundary(vL)).x;\n  float R = texture2D(uPressure, boundary(vR)).x;\n  float T = texture2D(uPressure, boundary(vT)).x;\n  float B = texture2D(uPressure, boundary(vB)).x;\n  vec2 velocity = texture2D(uVelocity, vUv).xy;\n  velocity.xy -= vec2(R - L, T - B);\n  gl_FragColor = vec4(velocity, 0.0, 1.0);\n}\n",ce="\nprecision highp float;\nprecision mediump sampler2D;\n\nvarying vec2 vUv;\nvarying vec2 vL;\nvarying vec2 vR;\nvarying vec2 vT;\nvarying vec2 vB;\nuniform sampler2D uPressure;\nuniform sampler2D uDivergence;\n\nvec2 boundary (in vec2 uv) {\n  uv = min(max(uv, 0.0), 1.0);\n  return uv;\n}\n\nvoid main () {\n  float L = texture2D(uPressure, boundary(vL)).x;\n  float R = texture2D(uPressure, boundary(vR)).x;\n  float T = texture2D(uPressure, boundary(vT)).x;\n  float B = texture2D(uPressure, boundary(vB)).x;\n  float C = texture2D(uPressure, vUv).x;\n  float divergence = texture2D(uDivergence, vUv).x;\n  float pressure = (L + R + B + T - divergence) * 0.25;\n  gl_FragColor = vec4(pressure, 0.0, 0.0, 1.0);\n}\n",le="\nprecision highp float;\nprecision mediump sampler2D;\n\nvarying vec2 vUv;\nuniform sampler2D uTarget;\nuniform float aspectRatio;\nuniform vec3 color;\nuniform vec2 point;\nuniform float radius;\n\nvoid main () {\n  vec2 p = vUv - point.xy;\n  p.x *= aspectRatio;\n  vec3 splat = exp(-dot(p, p) / radius) * color;\n  vec3 base = texture2D(uTarget, vUv).xyz;\n  gl_FragColor = vec4(base + splat, 1.0);\n}\n",fe="\nprecision highp float;\nprecision mediump sampler2D;\n\nattribute vec2 aPosition;\nvarying vec2 vUv;\nvarying vec2 vL;\nvarying vec2 vR;\nvarying vec2 vT;\nvarying vec2 vB;\nuniform vec2 texelSize;\n\nvoid main () {\n  vUv = aPosition * 0.5 + 0.5;\n  vL = vUv - vec2(texelSize.x, 0.0);\n  vR = vUv + vec2(texelSize.x, 0.0);\n  vT = vUv + vec2(0.0, texelSize.y);\n  vB = vUv - vec2(0.0, texelSize.y);\n  gl_Position = vec4(aPosition, 0.0, 1.0);\n}\n",ve="\nprecision highp float;\nprecision mediump sampler2D;\n\nvarying vec2 vUv;\nvarying vec2 vT;\nvarying vec2 vB;\nuniform sampler2D uVelocity;\nuniform sampler2D uCurl;\nuniform float curl;\nuniform float dt;\n\nvoid main () {\n  float T = texture2D(uCurl, vT).x;\n  float B = texture2D(uCurl, vB).x;\n  float C = texture2D(uCurl, vUv).x;\n  vec2 force = vec2(abs(T) - abs(B), 0.0);\n  force *= 1.0 / length(force + 0.00001) * curl * C;\n  vec2 vel = texture2D(uVelocity, vUv).xy;\n  gl_FragColor = vec4(vel + force * dt, 0.0, 1.0);\n}\n";function me(e){return e[(t=0,i=e.length-1,t=Math.ceil(t),i=Math.floor(i),Math.floor(Math.random()*(i-t+1))+t)];var t,i}var pe={textureDownsample:1,densityDissipation:.98,velocityDissipation:.99,pressureDissipation:.8,pressureIterations:25,curl:30,splatRadius:.005,colorsPool:["#4e342e","#424242","#00695c"]},he=function e(){Object(f.a)(this,e),this.id=-1,this.x=0,this.y=0,this.dx=0,this.dy=0,this.down=!1,this.moved=!1,this.color=[30,0,300]},_e=function(){function e(t){var i=this;Object(f.a)(this,e),this.onMouseMove=function(e){i._pointers[0].moved=i._pointers[0].down,i._pointers[0].dx=10*(e.offsetX-i._pointers[0].x),i._pointers[0].dy=10*(e.offsetY-i._pointers[0].y),i._pointers[0].x=e.offsetX,i._pointers[0].y=e.offsetY},this.start=function(){i._pointers[0].down=!0,i._pointers[0].color=me(i._config.colorsPool)},this.end=function(){i._pointers[0].down=!1},this.changeColor=function(){i._pointers[0].color=me(i._config.colorsPool)},this.onTouchStart=function(e){for(var t=0;t<e.touches.length;++t)i._pointers[t].down=!0,i._pointers[t].color=[Math.random()+.2,Math.random()+.2,Math.random()+.2]},this.onTouchMove=function(e){for(var t=0;t<e.touches.length;++t){var r=e.touches[t];i._pointers[t].moved=i._pointers[t].down,i._pointers[t].dx=10*(r.clientX-i._pointers[t].x),i._pointers[t].dy=10*(r.clientY-i._pointers[t].y),i._pointers[t].x=r.clientX,i._pointers[t].y=r.clientY}},this.onTouchEnd=function(e){for(var t=0;t<e.touches.length;++t)i._pointers[t].down=!1},this._blit=function(e){var t=i._gl;t.bindFramebuffer(t.FRAMEBUFFER,e),t.drawElements(t.TRIANGLES,6,t.UNSIGNED_SHORT,0)};var r=t.canvas,n=t.config,a=void 0===n?pe:n;this._canvas=r,this.config=Object(o.a)(Object(o.a)({},pe),a),this._pointers=[new he],this._splatStack=[];var s=function(e){var t,i,r={alpha:!1,depth:!1,stencil:!1,antialias:!1},n=e.getContext("webgl2",r),o=!!n;o||(n=e.getContext("webgl",r)||e.getContext("experimental-webgl",r)),o?(n.getExtension("EXT_color_buffer_float"),i=n.getExtension("OES_texture_float_linear")):(t=n.getExtension("OES_texture_half_float"),i=n.getExtension("OES_texture_half_float_linear")),n.clearColor(0,0,0,1);var a,s,u,c=o?n.HALF_FLOAT:t.HALF_FLOAT_OES;return o?(a=te(n,n.RGBA16F,n.RGBA,c),s=te(n,n.RG16F,n.RG,c),u=te(n,n.R16F,n.RED,c)):(a=te(n,n.RGBA,n.RGBA,c),s=te(n,n.RGBA,n.RGBA,c),u=te(n,n.RGBA,n.RGBA,c)),{gl:n,ext:{formatRGBA:a,formatRG:s,formatR:u,halfFloatTexType:c,supportLinearFiltering:i}}}(r),u=s.gl,c=s.ext;this._gl=u,this._ext=c,this._initPrograms(),this._initBlit(),this.resize(),this._time=Date.now(),this._timer=0}return Object(v.a)(e,[{key:"config",get:function(){return this._config},set:function(e){this._config=e,this._config.colorsPool=this._config.colorsPool.map((function(e){return x()(e).rgb().array().map((function(e){return e/255}))}))}},{key:"width",get:function(){return this._canvas.width}},{key:"height",get:function(){return this._canvas.height}},{key:"addSplat",value:function(e){this._splatStack.push([e])}},{key:"addSplats",value:function(e){this._splatStack.push(Array.isArray(e)?e:[e])}},{key:"addRandomSplats",value:function(e){for(var t=[],i=0;i<e;++i)t.push(this._getRandomSplat());this.addSplats(t)}},{key:"resize",value:function(){var e=this._canvas,t=e.width,i=e.height;this._width===t&&this._height===i||(this._width=t,this._height=i,this._initFramebuffers())}},{key:"_initPrograms",value:function(){var e=this._gl,t=this._ext;this._programs={},this._programs.clear=new ee(e,fe,ne),this._programs.display=new ee(e,fe,ae),this._programs.splat=new ee(e,fe,le),this._programs.advection=new ee(e,fe,t.supportLinearFiltering?re:ie),this._programs.divergence=new ee(e,fe,se),this._programs.curl=new ee(e,fe,oe),this._programs.vorticity=new ee(e,fe,ve),this._programs.pressure=new ee(e,fe,ce),this._programs.gradientSubtract=new ee(e,fe,ue)}},{key:"_initFramebuffers",value:function(){var e=this._gl,t=this._ext;function i(t,i,r,n,o,a,s){e.activeTexture(e.TEXTURE0+t);var u=e.createTexture();e.bindTexture(e.TEXTURE_2D,u),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,s),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,s),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.texImage2D(e.TEXTURE_2D,0,n,i,r,0,o,a,null);var c=e.createFramebuffer();return e.bindFramebuffer(e.FRAMEBUFFER,c),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,u,0),e.viewport(0,0,i,r),e.clear(e.COLOR_BUFFER_BIT),[u,c,t]}function r(e,t,r,n,o,a,s){var u=i(e,t,r,n,o,a,s),c=i(e+1,t,r,n,o,a,s);return{get read(){return u},get write(){return c},swap:function(){var e=u;u=c,c=e}}}this._textureWidth=e.drawingBufferWidth>>this._config.textureDownsample,this._textureHeight=e.drawingBufferHeight>>this._config.textureDownsample;var n=t.halfFloatTexType,o=t.formatRGBA,a=t.formatRG,s=t.formatR;this._density=r(2,this._textureWidth,this._textureHeight,o.internalFormat,o.format,n,t.supportLinearFiltering?e.LINEAR:e.NEAREST),this._velocity=r(0,this._textureWidth,this._textureHeight,a.internalFormat,a.format,n,t.supportLinearFiltering?e.LINEAR:e.NEAREST),this._divergence=i(4,this._textureWidth,this._textureHeight,s.internalFormat,s.format,n,e.NEAREST),this._curl=i(5,this._textureWidth,this._textureHeight,s.internalFormat,s.format,n,e.NEAREST),this._pressure=r(6,this._textureWidth,this._textureHeight,s.internalFormat,s.format,n,e.NEAREST)}},{key:"_initBlit",value:function(){var e=this._gl;e.bindBuffer(e.ARRAY_BUFFER,e.createBuffer()),e.bufferData(e.ARRAY_BUFFER,new Float32Array([-1,-1,-1,1,1,1,1,-1]),e.STATIC_DRAW),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,e.createBuffer()),e.bufferData(e.ELEMENT_ARRAY_BUFFER,new Uint16Array([0,1,2,0,2,3]),e.STATIC_DRAW),e.vertexAttribPointer(0,2,e.FLOAT,!1,0,0),e.enableVertexAttribArray(0)}},{key:"_splat",value:function(e,t,i,r,n){var o=this._gl;this._programs.splat.bind(),o.uniform1i(this._programs.splat.uniforms.uTarget,this._velocity.read[2]),o.uniform1f(this._programs.splat.uniforms.aspectRatio,this._canvas.width/this._canvas.height),o.uniform2f(this._programs.splat.uniforms.point,e/this._canvas.width,1-t/this._canvas.height),o.uniform3f(this._programs.splat.uniforms.color,i,-r,1),o.uniform1f(this._programs.splat.uniforms.radius,this._config.splatRadius),this._blit(this._velocity.write[1]),this._velocity.swap(),o.uniform1i(this._programs.splat.uniforms.uTarget,this._density.read[2]),o.uniform3f(this._programs.splat.uniforms.color,.3*n[0],.3*n[1],.3*n[2]),this._blit(this._density.write[1]),this._density.swap()}},{key:"_addSplat",value:function(e){var t=e.x,i=e.y,r=e.dx,n=e.dy,o=e.color;void 0!==t&&void 0!==i&&void 0!==r&&void 0!==n&&void 0!==o&&this._splat(t,i,r,n,o)}},{key:"_addSplats",value:function(e){var t,i=Object(l.a)(e);try{for(i.s();!(t=i.n()).done;){var r=t.value;this._addSplat(r)}}catch(n){i.e(n)}finally{i.f()}}},{key:"_getRandomSplat",value:function(){var e=[10*Math.random(),10*Math.random(),10*Math.random()];return{x:this._canvas.width*Math.random(),y:this._canvas.height*Math.random(),dx:1e3*(Math.random()-.5),dy:1e3*(Math.random()-.5),color:e}}},{key:"update",value:function(){var e=this._gl,t=Math.min((Date.now()-this._time)/1e3,.016);this._time=Date.now(),this._timer+=1e-4;var i=this._textureWidth,r=this._textureHeight,n=1/i,o=1/r;e.viewport(0,0,i,r),this._splatStack.length>0&&this._addSplats(this._splatStack.pop()),this._programs.advection.bind(),e.uniform2f(this._programs.advection.uniforms.texelSize,n,o),e.uniform1i(this._programs.advection.uniforms.uVelocity,this._velocity.read[2]),e.uniform1i(this._programs.advection.uniforms.uSource,this._velocity.read[2]),e.uniform1f(this._programs.advection.uniforms.dt,t),e.uniform1f(this._programs.advection.uniforms.dissipation,this._config.velocityDissipation),this._blit(this._velocity.write[1]),this._velocity.swap(),e.uniform1i(this._programs.advection.uniforms.uVelocity,this._velocity.read[2]),e.uniform1i(this._programs.advection.uniforms.uSource,this._density.read[2]),e.uniform1f(this._programs.advection.uniforms.dissipation,this._config.densityDissipation),this._blit(this._density.write[1]),this._density.swap();for(var a=0;a<this._pointers.length;a++){var s=this._pointers[a];s.moved&&(this._splat(s.x,s.y,s.dx,s.dy,s.color),s.moved=!1)}this._programs.curl.bind(),e.uniform2f(this._programs.curl.uniforms.texelSize,n,o),e.uniform1i(this._programs.curl.uniforms.uVelocity,this._velocity.read[2]),this._blit(this._curl[1]),this._programs.vorticity.bind(),e.uniform2f(this._programs.vorticity.uniforms.texelSize,n,o),e.uniform1i(this._programs.vorticity.uniforms.uVelocity,this._velocity.read[2]),e.uniform1i(this._programs.vorticity.uniforms.uCurl,this._curl[2]),e.uniform1f(this._programs.vorticity.uniforms.curl,this._config.curl),e.uniform1f(this._programs.vorticity.uniforms.dt,t),this._blit(this._velocity.write[1]),this._velocity.swap(),this._programs.divergence.bind(),e.uniform2f(this._programs.divergence.uniforms.texelSize,n,o),e.uniform1i(this._programs.divergence.uniforms.uVelocity,this._velocity.read[2]),this._blit(this._divergence[1]),this._programs.clear.bind();var u=this._pressure.read[2];e.activeTexture(e.TEXTURE0+u),e.bindTexture(e.TEXTURE_2D,this._pressure.read[0]),e.uniform1i(this._programs.clear.uniforms.uTexture,u),e.uniform1f(this._programs.clear.uniforms.value,this._config.pressureDissipation),this._blit(this._pressure.write[1]),this._pressure.swap(),this._programs.pressure.bind(),e.uniform2f(this._programs.pressure.uniforms.texelSize,n,o),e.uniform1i(this._programs.pressure.uniforms.uDivergence,this._divergence[2]),u=this._pressure.read[2],e.uniform1i(this._programs.pressure.uniforms.uPressure,u),e.activeTexture(e.TEXTURE0+u);for(var c=0;c<this._config.pressureIterations;c++)e.bindTexture(e.TEXTURE_2D,this._pressure.read[0]),this._blit(this._pressure.write[1]),this._pressure.swap();this._programs.gradientSubtract.bind(),e.uniform2f(this._programs.gradientSubtract.uniforms.texelSize,n,o),e.uniform1i(this._programs.gradientSubtract.uniforms.uPressure,this._pressure.read[2]),e.uniform1i(this._programs.gradientSubtract.uniforms.uVelocity,this._velocity.read[2]),this._blit(this._velocity.write[1]),this._velocity.swap(),e.viewport(0,0,e.drawingBufferWidth,e.drawingBufferHeight),this._programs.display.bind(),e.uniform1i(this._programs.display.uniforms.uTexture,this._density.read[2]),this._blit(null)}}]),e}(),de=function(e){Object(u.a)(i,e);var t=Object(c.a)(i);function i(){var e;Object(f.a)(this,i);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(e=t.call.apply(t,[this].concat(n)))._containerRef=function(t){e._container=t},e._canvasRef=function(t){e._canvas=t},e._onMouseEnter=function(t){t.preventDefault(),e._animation.start()},e._onMouseMove=function(t){t.preventDefault(),e._animation.onMouseMove(t.nativeEvent)},e.onMouseLeave=function(t){t.preventDefault(),e._animation.end()},e._onMouseClick=function(t){t.preventDefault(),e._animation.changeColor()},e._onTouchStart=function(t){e._animation.onTouchStart(t.nativeEvent)},e._onTouchMove=function(t){e._animation.onTouchMove(t.nativeEvent)},e._onTouchEnd=function(t){e._animation.onTouchEnd(t.nativeEvent)},e._onResize=function(){e._canvas.width=e._container.clientWidth,e._canvas.height=e._container.clientHeight,e._animation&&e._animation.resize()},e._tick=function(){e._animation&&e._animation.update(),e._tickRaf=_()(e._tick)},e}return Object(v.a)(i,[{key:"componentDidMount",value:function(){window.addEventListener("resize",this._onResize),this._reset(this.props),this._tick(),this._animation.start()}},{key:"componentDidUpdate",value:function(e,t,i){this._onResize(),this.props.config&&(this._animation.config=Object(o.a)(Object(o.a)({},pe),this.props.config))}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this._onResize),this._tickRaf&&(_.a.cancel(this._tickRaf),this._tickRaf=null)}},{key:"render",value:function(){var e=this.props,t=(e.content,e.config,e.animationRef,e.style),i=(e.size,Object(s.a)(e,["content","config","animationRef","style","size"]));return p.a.createElement("div",Object.assign({style:Object(o.a)({width:"100%",height:"100%",overflow:"hidden"},t)},i,{ref:this._containerRef}),p.a.createElement("canvas",{ref:this._canvasRef,onMouseEnter:this._onMouseEnter,onMouseMove:this._onMouseMove,onMouseLeave:this.onMouseLeave,onClick:this._onMouseClick,onTouchStart:this._onTouchStart,onTouchMove:this._onTouchMove,onTouchEnd:this._onTouchEnd,style:{width:"100%",height:"100%"}}))}},{key:"_reset",value:function(e){var t=e.animationRef,i=e.content,r=e.config;this._onResize(),this._animation=new _e({canvas:this._canvas,content:i,config:r}),t&&t(this._animation)}}]),i}(m.Component);de.propTypes={content:Q.string,config:Q.object,style:Q.object,animationRef:Q.func,size:Q.shape({width:Q.number,height:Q.number})},de.defaultProps={config:pe,style:{}};var ge=g()({monitorWidth:!0,monitorHeight:!0})(de),ye=(i(145),i(108)),xe=i.n(ye),be=i(44),Te=i.n(be),Re=i(9),Ee=i(2);function De(e){var t=e.config,i=e.updateConfig,r=e.resetConfig,n=e.makeRandomSplats;return Object(Ee.jsxs)(Re.d,{data:t,onUpdate:i,children:[Object(Ee.jsx)(Re.c,{path:"textureDownsample",label:"Texture Downsample",options:[0,1,2]}),Object(Ee.jsx)(Re.b,{path:"densityDissipation",label:"Density Diffusion",min:.9,max:1,step:.01}),Object(Ee.jsx)(Re.b,{path:"velocityDissipation",label:"Velocity Diffusion",min:.9,max:1,step:.01}),Object(Ee.jsx)(Re.b,{path:"pressureDissipation",label:"Pressure Diffusion",min:0,max:1,step:.1}),Object(Ee.jsx)(Re.b,{path:"pressureIterations",label:"Pressure Iterations",min:1,max:60,step:1}),Object(Ee.jsx)(Re.b,{path:"curl",label:"Curl",min:0,max:50,step:1}),Object(Ee.jsx)(Re.b,{path:"splatRadius",label:"Splat Radius",min:.001,max:.02,step:.005}),Object(Ee.jsx)(Re.a,{label:"Random Splats",onClick:n}),Object(Ee.jsx)(Re.a,{label:"Reset Config",onClick:r})]})}var Fe={textureDownsample:1,densityDissipation:.98,velocityDissipation:.99,pressureDissipation:.8,pressureIterations:25,curl:30,splatRadius:.005,colorsPool:["#FF1100","#FF0046","#5D00FF","#0043FF","#0088FF","#00DCFF","#00FFF7","#00FFD4","#00FFA2","#DADADA","#FFFFFF"]};function Se(){var e=Object(m.useState)(Object(o.a)({},Fe)),t=Object(a.a)(e,2),i=t[0],r=t[1],n=Object(m.useRef)(null),s=Object(m.useCallback)((function(e){return r(Object(o.a)(Object(o.a)({},i),e))}),[i,r]),u=Object(m.useCallback)((function(){return r(Object(o.a)({},Fe))}),[r]),c=Object(m.useCallback)((function(){var e;null===(e=n.current)||void 0===e||e.addRandomSplats(5+20*Math.random()|0)}),[n]);return Object(Ee.jsxs)("div",{className:Te.a.root,children:[Object(Ee.jsx)(ge,{config:i,animationRef:function(e){return n.current=e}}),Object(Ee.jsx)("div",{className:Te.a.overlay,children:Object(Ee.jsx)("h1",{className:Te.a.h1,children:"React Fluid Animation"})}),Object(Ee.jsx)(xe.a,{href:"https://github.com/usertive/react-fluid-animation",bannerColor:"#70B7FD",direction:"left"}),Object(Ee.jsx)(De,{config:i,updateConfig:s,resetConfig:u,makeRandomSplats:c})]})}n.a.render(Object(Ee.jsx)(Se,{}),document.getElementById("root"))},44:function(e,t,i){e.exports={root:"App_root__2h8CC",overlay:"App_overlay__1bKt8",h1:"App_h1__26v8a"}}},[[288,1,2]]]);
//# sourceMappingURL=main.3802765a.chunk.js.map